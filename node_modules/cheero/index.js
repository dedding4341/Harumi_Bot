var vorpal = require('vorpal')();
var glob   = require("glob");
var process = require("process");
var cheerio = require('cheerio');
var fs      = require('fs');

vorpal
  .command('element [element] [attribute] [path]', 'Outputs "bar"')
  .action(function(args, callback) {
    // options is optional
    var output = [];
    glob(args.path, function (er, files) {
        if(er) throw new Error(er);
        
        files.forEach(function(file) {
            
            var fileContent = fs.readFileSync(file, 'utf-8');
            
            var $ = cheerio.load(fileContent);
            
            $(args.element).each(function(i, elem) {
                output.push(elem.attribs[args.attribute]);
            });
            
        }, this);
        
        callback();
    });
    
  });

vorpal
  .delimiter('cheero$')
  .show();